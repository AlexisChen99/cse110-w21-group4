<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Potato Timer</title>
    <link rel="stylesheet" href="potatoTheme.css">
    <script src="app.js"></script>
</head>

<body>
    <!-- <img src="" id="sky"> -->
    <div class="content-wrapper">
        <p class="title" id="title">Potato Timer</p>

        <p class="phase" id="phaseDisplay">Work</p>
        <img src="img/settings.png" alt="Settings" id="settings-icon">

        <div class="circle" id="circle">
            <p class="timer" id="timerDisplay">25:00</p>
        </div>

        <div class="button-wrapper">
            <button class="reset" id="reset" onclick="reset()">Reset</button>
            <button class="start-stop" id="start" onclick="start()">Start</button>
            <button id="tasks" onclick="displayTasks()">Tasks</button>
        </div>

        <div id="task-container">
            <input type="text" id="enter-task" placeholder="Enter Task" required>
            <button id="taskAdder" onclick="addTask()">Add</button>
        </div>
        <label id="listTasks"></label>

        <!-- End of content wrapper -->
    </div>

    <div class="menu" id="settings-menu">
        <p>Settings</p>
        <p class="close" id="close-settings">Close</p>
        <div class="choose-theme" id="choose-theme">
            <button id="theme-dark" onclick="light()">Light Theme</button>
            <button id="theme-dark" onclick="dark()">Dark Theme</button>
            <button id="theme-potato" onclick="potato()">Potato Theme</button>
        </div>

        <form class="form-container" id="user-input">
            <div>
                <label for="work" class="field-label">Work Time</label>
                <input type="number" class="custom-time" id="work-min" value="25">
                <p>:</p>
                <input type="number" class="custom-time" id="work-sec" value="00">
            </div>

            <div>
                <label for="work" class="field-label">Short Break</label>
                <input type="number" class="custom-time" id="work-min" value="5">
                <p>:</p>
                <input type="number" class="custom-time" id="work-sec" value="00">
            </div>

            <div>
                <label for="work" class="field-label">Long Break</label>
                <input type="number" class="custom-time" id="work-min" value="25">
                <p>:</p>
                <input type="number" class="custom-time" id="work-sec" value="00">
            </div>
            <div>
                <label for="work" class="field-label">Volume (%)</label>
                <input type="number" class="custom-volume" id="volume" value="50">
                <img src="img/volume.png" alt="Mute?" class="volume-icon" id="volume-icon">
            </div>
        </form>
        <!-- End of settings menu -->
    </div>

    <div class="menu" id="task-menu">
        <p>Tasks</p>
        <p class="close" id="close-tasks">Close</p>
        <p id="delete-all">Delete All</p>
        <div class="task-list-container" id="task-list-container">

        </div>
    </div>

</body>

<div class="bg" id="bg">
</div>

<script>
    /* save user's preference locally after theme changing */
    // function LoadData() {
    //     let theme = window.localStorage.getItem('theme');
    //     const app = document.getElementsByTagName("BODY")[0];
    //     if (!theme) {
    //         app.setAttribute("data-light-mode", "potato");
    //         window.localStorage.setItem('theme', 'potato');
    //         console.log('null');
    //     } else if (theme == 'potato'){
    //         potato();
    //         window.localStorage.setItem('theme', 'potato');
    //         console.log('potato');
    //     } else if (theme == 'dark'){
    //         dark();
    //         window.localStorage.setItem('theme', 'dark');
    //         console.log('dark');
    //     } else if (theme == 'light'){
    //         light();
    //         window.localStorage.setItem('theme', 'light');
    //         console.log('light');
    //     }
    // }

    window.onload = function () {
        const settings = document.getElementById('settings-icon');
        settings.addEventListener("click", function () {
            document.getElementById('settings-menu').style.display = 'block';
        });
        const closeSettings = document.getElementById('close-settings');
        closeSettings.addEventListener('click', function () {
            document.getElementById('settings-menu').style.display = 'none';
        });

        const displayTasks = document.getElementById('tasks');
        displayTasks.addEventListener('click', function () {
            document.getElementById('task-menu').style.display = 'block';
        });

        const closeTasks = document.getElementById('close-tasks');
        closeTasks.addEventListener('click', function () {
            document.getElementById('task-menu').style.display = 'none';
        })

        const volumeIcon = document.getElementById('volume-icon');
        volumeIcon.addEventListener('click', mute());

        const app = document.getElementsByTagName("BODY")[0];
        app.setAttribute("data-light-mode", "potato");

        // deciding on which theme to use
        // LoadData();
    }

    function potato() {
        window.localStorage.setItem('theme', 'potato');
        var app = document.getElementsByTagName("BODY")[0];
        app.setAttribute("data-light-mode", "potato");
        var bg = document.getElementById("bg");
        bg.style.backgroundImage = 'url("img/background.png")';
        bg.style.background = '100% center no-repeat cover'
        var circle = document.getElementById('circle');
        circle.style.backgroundColor = '#ff0';
        circle.style["boxShadow"] = '0 0 20px 20px #ff0';
        circle.style.border = '5px solid #ff0';

        /* buttons */
        var btn = document.getElementsByTagName("button");
        btn[0].setAttribute("mode", "potato");
        btn[1].setAttribute("mode", "potato");
        btn[2].setAttribute("mode", "potato");
        btn[3].setAttribute("mode", "potato");
        btn[4].setAttribute("mode", "potato");
        btn[5].setAttribute("mode", "potato");
        btn[6].setAttribute("mode", "potato");

        /* setting menu */
        var settings = document.getElementById('settings-menu');
        settings.style.background = 'white';
        settings.style.color = 'black';
        settings.style.border = '5px solid #000';

        document.getElementById('timerDisplay').style.color = '#333';
        document.getElementById('title').style.color = '#333';
        document.getElementById('phaseDisplay').style.color = '#333';
        document.getElementById('settings-menu').style.display = 'none';
    }

    function dark() {
        window.localStorage.setItem('theme', 'dark');
        var app = document.getElementsByTagName("BODY")[0];
        app.setAttribute("data-light-mode", "dark");
        var bg = document.getElementById("bg");
        bg.style.background = 'none';
        var circle = document.getElementById('circle');
        circle.style.backgroundColor = '#333';
        circle.style["boxShadow"] = '0 0 10px 10px white';
        circle.style.border = '5px solid white';

        /* buttons */
        var btn = document.getElementsByTagName("button");
        btn[0].setAttribute("mode", "dark");
        btn[1].setAttribute("mode", "dark");
        btn[2].setAttribute("mode", "dark");
        btn[3].setAttribute("mode", "dark");
        btn[4].setAttribute("mode", "dark");
        btn[5].setAttribute("mode", "dark");
        btn[6].setAttribute("mode", "dark");

        /* setting menu */
        var settings = document.getElementById('settings-menu');
        settings.style.background = '#444';
        settings.style.color = 'white';
        settings.style.border = '5px solid white';


        document.getElementById('timerDisplay').style.color = 'white';
        document.getElementById('title').style.color = 'white';
        document.getElementById('phaseDisplay').style.color = 'white';
        document.getElementById('settings-menu').style.display = 'none';
        document.getElementById('task-menu').style.color='#333';

    }

    function light() {
        window.localStorage.setItem('theme', 'light');
        var app = document.getElementsByTagName("BODY")[0];
        app.setAttribute("data-light-mode", "light");
        var bg = document.getElementById("bg");
        bg.style.background = 'none';
        var circle = document.getElementById('circle');
        circle.style.backgroundColor = 'white';
        circle.style["boxShadow"] = '0 0 10px 10px #333';
        circle.style.border = '5px solid #333';

        /* resset and start button */
        var btn = document.getElementsByTagName("button");
        btn[0].setAttribute("mode", "light");
        btn[1].setAttribute("mode", "light");
        btn[2].setAttribute("mode", "light");
        btn[3].setAttribute("mode", "light");
        btn[4].setAttribute("mode", "light");
        btn[5].setAttribute("mode", "light");
        btn[6].setAttribute("mode", "light");

        /* setting menu */
        var settings = document.getElementById('settings-menu');
        settings.style.background = 'white';
        settings.style.color = 'black';
        settings.style.border = '5px solid #000';

        document.getElementById('timerDisplay').style.color = '#333';
        document.getElementById('title').style.color = '#333';
        document.getElementById('phaseDisplay').style.color = '#333';
        document.getElementById('settings-menu').style.display = 'none';
    }

    function displayTasks() {
        document.getElementById('task-menu').style.display = 'block';
    }

    function mute() {
        const volumeIcon = document.getElementById('volume-icon');
        volumeIcon.src = "img/volume-mute.png";
        const volume = document.getElementById('volume');
        volume.value = 0;
    }
</script>
