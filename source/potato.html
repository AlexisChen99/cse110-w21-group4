<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Potato Timer</title>
    <link rel="stylesheet" href="potatoTheme.css">
    <script src="app.js"></script>
</head>

<body>
    <div class="contentWrapper">
        <p id="title">Potato Timer</p>

        <p id="phaseDisplay">Work</p>
        <img src="img/settings.png" alt="Settings" id="settingsIcon">

        <div id="circleTimer">
            <p class="timer" id="timerDisplay">25:00</p>
        </div>

        <div class="buttonWrapper">
            <button id="reset" onclick="reset()">Reset</button>
            <button id="start" onclick="start()">Start</button>
            <button id="tasks" onclick="displayTasks()">Tasks</button>
        </div>

        <div class="taskContainer">
            <input type="text" id="enterTask" placeholder="Enter Task" required>
            <button id="taskAdder" onclick="addTask()">Add</button>
        </div>
        <div id="mainTasks">

        </div>

        <!-- End of content wrapper -->
    </div>

    <div class="menu" id="settingsMenu">
        <p>Settings</p>
        <p class="close" id="closeSettings">Close</p>
        <div id="chooseTheme">
            <p style="margin: 0 0; font-size: 18px;">Select a Theme</p>
            <button id="themeDark" onclick="light()">Light</button>
            <button id="themeDark" onclick="dark()">Dark</button>
            <button id="themePotato" onclick="potato()">Potato</button>
        </div>

        <form class="userInputContainer">
            <div>
                <label for="work" class="fieldLabel">Work Time</label>
                <input type="number" class="customTime" id="workMin" value="25">
                <p>:</p>
                <input type="number" class="customTime" id="workSec" value="00">
            </div>

            <div>
                <label for="shortBreak" class="fieldLabel">Short Break</label>
                <input type="number" class="customTime" id="shortMin" value="5">
                <p>:</p>
                <input type="number" class="customTime" id="shortSec" value="00">
            </div>

            <div>
                <label for="longBreak" class="fieldLabel">Long Break</label>
                <input type="number" class="customTime" id="longMin" value="25">
                <p>:</p>
                <input type="number" class="customTime" id="longSec" value="00">
            </div>
            <div>
                <label for="volume" class="fieldLabel">Volume (%)</label>
                <input type="number" class="customVolume" id="volume" value="50">
                <img src="img/volume.png" alt="Mute?" id="volumeIcon">
            </div>
        </form>
        <!-- End of settings menu -->
    </div>

    <div class="menu" id="taskMenu">
        <p>Tasks</p>
        <p class="close" id="closeTasks">Close</p>
        <p id="deleteAll">Delete All</p>
        <div id="taskListContainer">

        </div>
    </div>

</body>

<script>
    /* save user"s preference locally after theme changing */
    // function LoadData() {
    //     let theme = window.localStorage.getItem("theme");
    //     const app = document.getElementsByTagName("BODY")[0];
    //     if (!theme) {
    //         app.setAttribute("data-light-mode", "potato");
    //         window.localStorage.setItem("theme", "potato");
    //         console.log("null");
    //     } else if (theme == "potato"){
    //         potato();
    //         window.localStorage.setItem("theme", "potato");
    //         console.log("potato");
    //     } else if (theme == "dark"){
    //         dark();
    //         window.localStorage.setItem("theme", "dark");
    //         console.log("dark");
    //     } else if (theme == "light"){
    //         light();
    //         window.localStorage.setItem("theme", "light");
    //         console.log("light");
    //     }
    // }

    window.onload = function () {
        const settings = document.getElementById("settingsIcon");
        settings.addEventListener("click", function () {
            document.getElementById("settingsMenu").style.display = "block";
        });
        const closeSettings = document.getElementById("closeSettings");
        closeSettings.addEventListener("click", function () {
            document.getElementById("settingsMenu").style.display = "none";
        });

        const displayTasks = document.getElementById("tasks");
        displayTasks.addEventListener("click", function () {
            document.getElementById("taskMenu").style.display = "block";
        });

        const closeTasks = document.getElementById("closeTasks");
        closeTasks.addEventListener("click", function () {
            document.getElementById("taskMenu").style.display = "none";
        })

        const volumeIcon = document.getElementById("volumeIcon");
        volumeIcon.addEventListener("click", mute());

        const app = document.getElementsByTagName("BODY")[0];
        app.setAttribute("data-light-mode", "potato");

        // deciding on which theme to use
        // LoadData();
    }

    function potato() {
        window.localStorage.setItem("theme", "potato");
        var app = document.getElementsByTagName("BODY")[0];
        app.setAttribute("data-light-mode", "potato");
        var bg = document.getElementById("bg");
        bg.style.backgroundImage = 'url("img/background.png")';
        bg.style.background = "100% center no-repeat cover"
        var circle = document.getElementById("circleTimer");
        circle.style.backgroundColor = "#ff0";
        circle.style["boxShadow"] = "0 0 20px 20px #ff0";
        circle.style.border = "5px solid #ff0";

        /* buttons */
        var btn = document.getElementsByTagName("button");
        btn[0].setAttribute("mode", "potato");
        btn[1].setAttribute("mode", "potato");
        btn[2].setAttribute("mode", "potato");
        btn[3].setAttribute("mode", "potato");
        btn[4].setAttribute("mode", "potato");
        btn[5].setAttribute("mode", "potato");
        btn[6].setAttribute("mode", "potato");

        /* setting menu */
        var settings = document.getElementById("settingsMenu");
        settings.style.background = "white";
        settings.style.color = "black";
        settings.style.border = "5px solid #000";

        document.getElementById("timerDisplay").style.color = "#333";
        document.getElementById("title").style.color = "#333";
        document.getElementById("phaseDisplay").style.color = "#333";
        document.getElementById("settingsMenu").style.display = "none";
    }

    function dark() {
        window.localStorage.setItem("theme", "dark");
        var app = document.getElementsByTagName("BODY")[0];
        app.setAttribute("data-light-mode", "dark");
        var bg = document.getElementById("bg");
        bg.style.background = "none";
        var circle = document.getElementById("circleTimer");
        circle.style.backgroundColor = "#333";
        circle.style["boxShadow"] = "0 0 10px 10px white";
        circle.style.border = "5px solid white";

        /* buttons */
        var btn = document.getElementsByTagName("button");
        btn[0].setAttribute("mode", "dark");
        btn[1].setAttribute("mode", "dark");
        btn[2].setAttribute("mode", "dark");
        btn[3].setAttribute("mode", "dark");
        btn[4].setAttribute("mode", "dark");
        btn[5].setAttribute("mode", "dark");
        btn[6].setAttribute("mode", "dark");

        /* setting menu */
        var settings = document.getElementById("settingsMenu");
        settings.style.background = "#444";
        settings.style.color = "white";
        settings.style.border = "5px solid white";


        document.getElementById("timerDisplay").style.color = "white";
        document.getElementById("title").style.color = "white";
        document.getElementById("phaseDisplay").style.color = "white";
        document.getElementById("settingsMenu").style.display = "none";
        document.getElementById("taskMenu").style.color="#333";

    }

    function light() {
        window.localStorage.setItem("theme", "light");
        var app = document.getElementsByTagName("BODY")[0];
        app.setAttribute("data-light-mode", "light");
        var bg = document.getElementById("bg");
        bg.style.background = "none";
        var circle = document.getElementById("circleTimer");
        circle.style.backgroundColor = "white";
        circle.style["boxShadow"] = "0 0 10px 10px #333";
        circle.style.border = "5px solid #333";

        /* resset and start button */
        var btn = document.getElementsByTagName("button");
        btn[0].setAttribute("mode", "light");
        btn[1].setAttribute("mode", "light");
        btn[2].setAttribute("mode", "light");
        btn[3].setAttribute("mode", "light");
        btn[4].setAttribute("mode", "light");
        btn[5].setAttribute("mode", "light");
        btn[6].setAttribute("mode", "light");

        /* setting menu */
        var settings = document.getElementById("settingsMenu");
        settings.style.background = "white";
        settings.style.color = "black";
        settings.style.border = "5px solid #000";

        document.getElementById("timerDisplay").style.color = "#333";
        document.getElementById("title").style.color = "#333";
        document.getElementById("phaseDisplay").style.color = "#333";
        document.getElementById("settingsMenu").style.display = "none";
    }

    function displayTasks() {
        document.getElementById("taskMenu").style.display = "block";
    }

    function mute() {
        const volumeIcon = document.getElementById("volumeIcon");
        volumeIcon.src = "img/volume-mute.png";
        const volume = document.getElementById("volume");
        volume.value = 0;
    }
</script>
